/*
canvas.js
Ver.1.0.1
*/
(function(){var Canvas,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Canvas=(function(){Canvas.prototype.width=0;Canvas.prototype.height=0;Canvas.prototype.frameRate=30;Canvas.prototype.fillColor='rgba(0, 0, 0, 1)';Canvas.prototype.strokeColor='rgba(0, 0, 0, 1)';Canvas.prototype.backgroundColor='rgb(255, 255, 255)';Canvas.prototype.mouseX=0;Canvas.prototype.mouseY=0;Canvas.prototype.cv=null;Canvas.prototype.cx=null;Canvas.prototype._isResize=true;Canvas.prototype._timer=null;function Canvas(canvasID,width,height,isResize){if(isResize==null){isResize=true}this.getMousePos=__bind(this.getMousePos,this);this.resize=__bind(this.resize,this);this.main=__bind(this.main,this);this.cv=this.getCanvas(canvasID);this.cx=this.cv.getContext("2d");this._isResize=isResize;if(isResize){if(window.addEventListener){window.addEventListener("resize",this.resize)}else{window.attachEvent("resize",this.resize)}}this.resize(width,height);if(window.addEventListener){this.cv.addEventListener("mousemove",this.getMousePos)}else{this.cv.attachEvent("mousemove",this.getMousePos)}this.setup()}Canvas.prototype.setup=function(){};Canvas.prototype.main=function(){this.update();return this.draw()};Canvas.prototype.update=function(){};Canvas.prototype.draw=function(){};Canvas.prototype.resize=function(w,h){if(!isNaN(w)){this.width=w}else{if(this._isResize){this.width=this.windowWidth()}}if(!isNaN(h)){this.height=h}else{if(this._isResize){this.height=this.windowHeight()}}this.cv.width=this.width;return this.cv.height=this.height};Canvas.prototype.play=function(){return this._timer=setInterval(this.main,1000/this.frameRate)};Canvas.prototype.stop=function(){return clearInterval(this._timer)};Canvas.prototype.windowWidth=function(){var size;size=0;if(document.documentElement.clientWidth){size=document.documentElement.clientWidth}else{if(document.body.clientWidth){size=document.body.clientWidth}else{if(window.innerWidth){size=window.innerWidth}}}return size};Canvas.prototype.windowHeight=function(){var size;size=0;if(document.documentElement.clientHeight){size=document.documentElement.clientHeight}else{if(document.body.clientHeight){size=document.body.clientHeight}else{if(window.innerHeight){size=window.innerHeight}}}return size};Canvas.prototype.getCanvas=function(id){var canvasObj;canvasObj=document.getElementById(id);if(!(canvasObj!=null)){canvasObj=document.createElement("canvas");canvasObj.setAttribute("id",id);document.body.appendChild(canvasObj)}return canvasObj};Canvas.prototype.getMousePos=function(e){var rect;rect=e.target.getBoundingClientRect();this.mouseX=e.clientX-rect.left;return this.mouseY=e.clientY-rect.top};Canvas.isSupport=function(){var elem;elem=document.createElement('canvas');return!!(elem.getContext&&elem.getContext('2d'))};Canvas.isSupportText=function(){var elem;if(Canvas.isSupport()){elem=document.createElement('canvas');return!!(elem.getContext("2d").fillText)}return false};Canvas.isSupportWebGL=function(){return!!window.WebGLRenderingContext};Canvas.prototype.line=function(startX,startY,endX,endY){this.cx.beginPath();this.cx.strokeStyle=this.strokeColor;this.cx.moveTo(startX,startY);this.cx.lineTo(endX,endY);return this.cx.stroke()};Canvas.prototype.circle=function(x,y,radius){if(radius<0){radius*=-1}this.cx.beginPath();this.cx.fillStyle=this.fillColor;this.cx.arc(x,y,radius,0,Math.PI*2,false);return this.cx.fill()};Canvas.prototype.rect=function(x,y,width,height,isCenter){if(isCenter==null){isCenter=false}if(!(width!=null)){width=1}if(!(height!=null)){height=width}if(isCenter){x-=width*0.5;y-=height*0.5}this.cx.fillStyle=this.fillColor;return this.cx.fillRect(x,y,width,height)};Canvas.prototype.background=function(color){if(!(color!=null)){color=this.backgroundColor}this.cx.fillStyle=color;return this.cx.fillRect(0,0,this.width,this.height)};Canvas.prototype.image=function(img,x,y,w,h){return this.cx.drawImage(img,x,y,w,h)};return Canvas})();this.Canvas=Canvas}).call(this);